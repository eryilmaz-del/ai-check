<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>AIæ¤œç´¢å¯è¦–åŒ–è¨ºæ–­</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg-primary: #0a0a0f;
      --bg-secondary: #12121a;
      --bg-card: #1a1a24;
      --accent: #ff6b35;
      --accent-glow: rgba(255, 107, 53, 0.3);
      --accent-secondary: #4ecdc4;
      --text-primary: #ffffff;
      --text-secondary: #a0a0b0;
      --border: rgba(255, 255, 255, 0.08);
      --gradient-1: linear-gradient(135deg, #ff6b35 0%, #f7931e 100%);
      --gradient-2: linear-gradient(135deg, #4ecdc4 0%, #44a08d 100%);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Noto Sans JP', 'Outfit', sans-serif;
      background: var(--bg-primary);
      color: var(--text-primary);
      min-height: 100vh;
      overflow-x: hidden;
    }

    /* Animated background */
    .bg-animation {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 0;
      overflow: hidden;
      pointer-events: none;
    }

    .bg-orb {
      position: absolute;
      border-radius: 50%;
      filter: blur(80px);
      opacity: 0.4;
      animation: float 20s ease-in-out infinite;
    }

    .bg-orb-1 {
      width: 400px;
      height: 400px;
      background: var(--accent);
      top: -100px;
      right: -100px;
      animation-delay: 0s;
    }

    .bg-orb-2 {
      width: 300px;
      height: 300px;
      background: var(--accent-secondary);
      bottom: -50px;
      left: -50px;
      animation-delay: -5s;
    }

    .bg-orb-3 {
      width: 200px;
      height: 200px;
      background: #8b5cf6;
      top: 50%;
      left: 50%;
      animation-delay: -10s;
    }

    @keyframes float {
      0%, 100% { transform: translate(0, 0) scale(1); }
      25% { transform: translate(30px, -30px) scale(1.05); }
      50% { transform: translate(-20px, 20px) scale(0.95); }
      75% { transform: translate(20px, 30px) scale(1.02); }
    }

    .container {
      position: relative;
      z-index: 1;
      max-width: 900px;
      margin: 0 auto;
      padding: 40px 24px;
    }

    /* Header */
    .header {
      text-align: center;
      margin-bottom: 48px;
      animation: fadeInUp 0.8s ease-out;
    }

    .logo-badge {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 8px 16px;
      background: rgba(255, 107, 53, 0.1);
      border: 1px solid rgba(255, 107, 53, 0.3);
      border-radius: 100px;
      font-size: 0.85rem;
      color: var(--accent);
      margin-bottom: 24px;
      font-weight: 500;
    }

    .logo-badge::before {
      content: '';
      width: 8px;
      height: 8px;
      background: var(--accent);
      border-radius: 50%;
      animation: pulse 2s ease-in-out infinite;
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; transform: scale(1); }
      50% { opacity: 0.5; transform: scale(1.2); }
    }

    h1 {
      font-family: 'Outfit', sans-serif;
      font-size: clamp(2rem, 5vw, 3rem);
      font-weight: 700;
      letter-spacing: -0.02em;
      margin-bottom: 16px;
      background: linear-gradient(135deg, #fff 0%, #a0a0b0 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .subtitle {
      font-size: 1.1rem;
      color: var(--text-secondary);
      line-height: 1.7;
      max-width: 600px;
      margin: 0 auto;
    }

    /* Input Section */
    .input-section {
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: 24px;
      padding: 32px;
      margin-bottom: 32px;
      animation: fadeInUp 0.8s ease-out 0.1s both;
    }

    .input-label {
      display: block;
      font-size: 0.9rem;
      font-weight: 500;
      color: var(--text-secondary);
      margin-bottom: 12px;
      letter-spacing: 0.02em;
    }

    .input-wrapper {
      position: relative;
      margin-bottom: 24px;
    }

    .input-field {
      width: 100%;
      padding: 18px 24px;
      font-size: 1.15rem;
      font-family: inherit;
      background: var(--bg-secondary);
      border: 2px solid var(--border);
      border-radius: 16px;
      color: var(--text-primary);
      transition: all 0.3s ease;
      outline: none;
    }

    .input-field::placeholder {
      color: var(--text-secondary);
      opacity: 0.6;
    }

    .input-field:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 4px var(--accent-glow);
    }

    .button-group {
      display: flex;
      gap: 12px;
    }

    .btn {
      flex: 1;
      padding: 16px 32px;
      font-size: 1.1rem;
      font-family: inherit;
      font-weight: 600;
      border: none;
      border-radius: 14px;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
    }

    .btn-primary {
      background: var(--gradient-1);
      color: white;
      box-shadow: 0 4px 20px var(--accent-glow);
    }

    .btn-primary:hover:not(:disabled) {
      transform: translateY(-2px);
      box-shadow: 0 8px 30px var(--accent-glow);
    }

    .btn-primary:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none;
    }

    .btn-secondary {
      background: var(--bg-secondary);
      color: var(--text-secondary);
      border: 1px solid var(--border);
      flex: 0 0 auto;
      padding: 16px 24px;
    }

    .btn-secondary:hover:not(:disabled) {
      background: var(--bg-card);
      color: var(--text-primary);
    }

    .btn-icon {
      width: 20px;
      height: 20px;
    }

    /* Status */
    .status {
      text-align: center;
      margin-bottom: 24px;
      min-height: 28px;
    }

    .status-content {
      display: inline-flex;
      align-items: center;
      gap: 12px;
      padding: 12px 24px;
      background: var(--bg-card);
      border-radius: 100px;
      font-size: 0.95rem;
      color: var(--text-secondary);
      animation: fadeIn 0.3s ease-out;
    }

    .status-content.loading {
      color: var(--accent);
    }

    .status-content.complete {
      color: var(--accent-secondary);
    }

    .spinner {
      width: 18px;
      height: 18px;
      border: 2px solid rgba(255, 107, 53, 0.2);
      border-top-color: var(--accent);
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    /* Results */
    .results-container {
      display: none;
      animation: fadeInUp 0.6s ease-out;
    }

    .results-container.visible {
      display: block;
    }

    .result-card {
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: 20px;
      overflow: hidden;
      margin-bottom: 16px;
      opacity: 0;
      transform: translateY(20px);
      animation: cardAppear 0.5s ease-out forwards;
    }

    .result-card:nth-child(1) { animation-delay: 0.1s; }
    .result-card:nth-child(2) { animation-delay: 0.2s; }
    .result-card:nth-child(3) { animation-delay: 0.3s; }
    .result-card:nth-child(4) { animation-delay: 0.4s; }
    .result-card:nth-child(5) { animation-delay: 0.5s; }

    @keyframes cardAppear {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .result-header {
      display: flex;
      align-items: center;
      gap: 14px;
      padding: 20px 24px;
      background: linear-gradient(135deg, rgba(255, 107, 53, 0.08) 0%, transparent 100%);
      border-bottom: 1px solid var(--border);
    }

    .result-icon {
      width: 44px;
      height: 44px;
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.3rem;
      flex-shrink: 0;
    }

    .result-card:nth-child(1) .result-icon { background: linear-gradient(135deg, #ff6b35 0%, #f7931e 100%); }
    .result-card:nth-child(2) .result-icon { background: linear-gradient(135deg, #4ecdc4 0%, #44a08d 100%); }
    .result-card:nth-child(3) .result-icon { background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%); }
    .result-card:nth-child(4) .result-icon { background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); }
    .result-card:nth-child(5) .result-icon { background: linear-gradient(135deg, #10b981 0%, #059669 100%); }

    .result-title {
      font-size: 1.05rem;
      font-weight: 600;
      color: var(--text-primary);
    }

    .result-number {
      font-family: 'Outfit', sans-serif;
      font-size: 0.75rem;
      font-weight: 600;
      color: var(--text-secondary);
      letter-spacing: 0.05em;
      margin-bottom: 2px;
    }

    .result-body {
      padding: 20px 24px;
      font-size: 0.95rem;
      line-height: 1.8;
      color: var(--text-secondary);
    }

    .result-body strong, .result-body b {
      color: var(--text-primary);
      font-weight: 500;
    }

    /* Ranking styles */
    .rank-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 10px 14px;
      margin: 6px 0;
      background: var(--bg-secondary);
      border-radius: 10px;
      border-left: 3px solid var(--border);
    }

    .rank-item.rank-gold {
      border-left-color: #ffd700;
      background: linear-gradient(90deg, rgba(255, 215, 0, 0.1) 0%, var(--bg-secondary) 100%);
    }

    .rank-item.rank-silver {
      border-left-color: #c0c0c0;
      background: linear-gradient(90deg, rgba(192, 192, 192, 0.1) 0%, var(--bg-secondary) 100%);
    }

    .rank-item.rank-bronze {
      border-left-color: #cd7f32;
      background: linear-gradient(90deg, rgba(205, 127, 50, 0.1) 0%, var(--bg-secondary) 100%);
    }

    .rank-badge {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      min-width: 36px;
      padding: 4px 8px;
      background: var(--bg-card);
      border-radius: 6px;
      font-size: 0.85rem;
      font-weight: 600;
      color: var(--accent);
    }

    .rank-gold .rank-badge { color: #ffd700; }
    .rank-silver .rank-badge { color: #c0c0c0; }
    .rank-bronze .rank-badge { color: #cd7f32; }

    /* Bullet items */
    .bullet-item {
      padding: 8px 0 8px 20px;
      position: relative;
      border-bottom: 1px solid var(--border);
    }

    .bullet-item:last-child {
      border-bottom: none;
    }

    .bullet-item::before {
      content: '';
      position: absolute;
      left: 0;
      top: 50%;
      transform: translateY(-50%);
      width: 8px;
      height: 8px;
      background: var(--accent);
      border-radius: 50%;
    }

    /* Query example */
    .query-example {
      background: linear-gradient(135deg, rgba(78, 205, 196, 0.15) 0%, rgba(78, 205, 196, 0.05) 100%);
      border: 1px solid rgba(78, 205, 196, 0.3);
      border-radius: 12px;
      padding: 14px 18px;
      margin: 12px 0;
    }

    .query-label {
      font-size: 0.85rem;
      color: var(--accent-secondary);
      display: block;
      margin-bottom: 6px;
    }

    .query-text {
      font-size: 1.1rem;
      font-weight: 500;
      color: var(--text-primary);
    }

    /* Target rank highlight */
    .target-rank {
      background: linear-gradient(135deg, rgba(255, 107, 53, 0.2) 0%, rgba(255, 107, 53, 0.05) 100%);
      border: 1px solid rgba(255, 107, 53, 0.4);
      border-radius: 12px;
      padding: 14px 18px;
      margin: 16px 0;
    }

    .target-label {
      font-size: 0.85rem;
      color: var(--accent);
      display: block;
      margin-bottom: 6px;
    }

    .target-value {
      font-size: 1.2rem;
      font-weight: 600;
      color: var(--text-primary);
    }

    /* CTA Section */
    .cta-section {
      background: linear-gradient(135deg, rgba(255, 107, 53, 0.1) 0%, rgba(78, 205, 196, 0.1) 100%);
      border: 1px solid var(--border);
      border-radius: 20px;
      padding: 32px;
      text-align: center;
      margin-top: 32px;
      animation: fadeInUp 0.6s ease-out 0.6s both;
    }

    .cta-title {
      font-size: 1.2rem;
      font-weight: 600;
      margin-bottom: 8px;
    }

    .cta-text {
      color: var(--text-secondary);
      font-size: 0.95rem;
    }

    /* Footer */
    .footer {
      text-align: center;
      margin-top: 40px;
      padding-top: 24px;
      border-top: 1px solid var(--border);
      color: var(--text-secondary);
      font-size: 0.85rem;
    }

    /* Animations */
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    /* Responsive */
    @media (max-width: 600px) {
      .container {
        padding: 24px 16px;
      }
      
      .input-section {
        padding: 24px 20px;
      }
      
      .button-group {
        flex-direction: column;
      }
      
      .btn-secondary {
        flex: 1;
      }
    }
  </style>
</head>
<body>
  <div class="bg-animation">
    <div class="bg-orb bg-orb-1"></div>
    <div class="bg-orb bg-orb-2"></div>
    <div class="bg-orb bg-orb-3"></div>
  </div>

  <div class="container">
    <header class="header">
      <div class="logo-badge">AIæ¤œç´¢å¯¾ç­– ç°¡æ˜“è¨ºæ–­</div>
      <h1>AIæ¤œç´¢å¯è¦–åŒ–ãƒã‚§ãƒƒã‚¯</h1>
      <p class="subtitle">
        ä¼šç¤¾åãƒ»ã‚µãƒ¼ãƒ“ã‚¹åã‚’å…¥åŠ›ã™ã‚‹ã¨ã€AIãŒã©ã®ã‚ˆã†ã«èªè­˜ã—ã¦ã„ã‚‹ã‹ã€<br>
        ç«¶åˆã¨ã®æ¯”è¼ƒã€æ”¹å–„ãƒã‚¤ãƒ³ãƒˆã‚’å³åº§ã«è¨ºæ–­ã—ã¾ã™ã€‚
      </p>
    </header>

    <section class="input-section">
      <label class="input-label" for="company">ä¼šç¤¾åãƒ»ã‚µãƒ¼ãƒ“ã‚¹åã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</label>
      <div class="input-wrapper">
        <input 
          id="company" 
          class="input-field" 
          type="text" 
          placeholder="ä¾‹ï¼‰ã‚ªãƒ«ã‚¿ã‚¯æ ªå¼ä¼šç¤¾ / â—‹â—‹ã‚¯ãƒ©ã‚¦ãƒ‰"
          autocomplete="off"
        />
      </div>
      <div class="button-group">
        <button id="run" class="btn btn-primary">
          <svg class="btn-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
          </svg>
          è¨ºæ–­ã‚¹ã‚¿ãƒ¼ãƒˆ
        </button>
        <button id="reset" class="btn btn-secondary">ãƒªã‚»ãƒƒãƒˆ</button>
      </div>
    </section>

    <div class="status" id="status"></div>

    <div class="results-container" id="results">
      <!-- Results will be injected here -->
    </div>

    <div class="cta-section" id="cta" style="display: none;">
      <p class="cta-title">ğŸ’¡ è©³ç´°ãªAIæ¤œç´¢å¯¾ç­–ãƒ¬ãƒãƒ¼ãƒˆã‚’ã”ç”¨æ„ã§ãã¾ã™</p>
      <p class="cta-text">å…·ä½“çš„ãªæ”¹å–„æ–½ç­–ãƒ»ç«¶åˆåˆ†æã¯ã€å¾Œæ—¥ãŠæ‰“ã¡åˆã‚ã›ã«ã¦ã”æä¾›ã„ãŸã—ã¾ã™ã€‚</p>
    </div>

    <footer class="footer">
      <p>â€» æœ¬è¨ºæ–­ã¯AIã«ã‚ˆã‚‹æ¨å®šçµæœã§ã™ã€‚è©³ç´°ãªåˆ†æã¯åˆ¥é€”ã”ç›¸è«‡ãã ã•ã„ã€‚</p>
    </footer>
  </div>

<script>
  const API_KEY = "AIzaSyDMB77R4co7NT_vLq-mm9tigkFxyu_9pus";  
  const MODEL = "gemini-2.5-flash";

  const runBtn = document.getElementById("run");
  const resetBtn = document.getElementById("reset");
  const companyInput = document.getElementById("company");
  const statusEl = document.getElementById("status");
  const resultsEl = document.getElementById("results");
  const ctaEl = document.getElementById("cta");

  const sectionMeta = [
    { icon: "ğŸ”", title: "AIã®èªè­˜çŠ¶æ³" },
    { icon: "ğŸ“Š", title: "ãŠã™ã™ã‚ã‚¯ã‚¨ãƒªã§ã®è¡¨ç¤ºã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³" },
    { icon: "âš”ï¸", title: "ç«¶åˆä¼æ¥­ãƒ»ã‚µãƒ¼ãƒ“ã‚¹" },
    { icon: "ğŸ’¡", title: "AIæ¤œç´¢ã§ã®å¼·ã¿ã¨æ©Ÿä¼š" },
    { icon: "ğŸš€", title: "æ¨å¥¨ã‚¢ã‚¯ã‚·ãƒ§ãƒ³" }
  ];

  function setStatus(message, type = "") {
    if (!message) {
      statusEl.innerHTML = "";
      return;
    }
    
    let icon = "";
    if (type === "loading") {
      icon = '<div class="spinner"></div>';
    } else if (type === "complete") {
      icon = "âœ“";
    }
    
    statusEl.innerHTML = `
      <div class="status-content ${type}">
        ${icon}
        <span>${message}</span>
      </div>
    `;
  }

  function parseResults(text) {
    // ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’åˆ†å‰²ï¼ˆç•ªå·ã§åŒºåˆ‡ã‚‹ï¼‰
    const sections = [];
    const lines = text.split('\n');
    let currentSection = null;
    let currentContent = [];

    for (const line of lines) {
      // ç•ªå·ä»˜ãã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®é–‹å§‹ã‚’æ¤œå‡º
      const sectionMatch = line.match(/^(?:<b>)?(\d)\.\s*(.+?)(?:<\/b>)?$/);
      
      if (sectionMatch) {
        // å‰ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’ä¿å­˜
        if (currentSection !== null) {
          sections.push({
            number: currentSection,
            content: currentContent.join('\n').trim()
          });
        }
        currentSection = parseInt(sectionMatch[1]);
        currentContent = [];
      } else if (currentSection !== null) {
        // ã‚¿ã‚¤ãƒˆãƒ«è¡Œã‚’ã‚¹ã‚­ãƒƒãƒ—ï¼ˆå¤ªå­—ã®ã¿ã®è¡Œï¼‰
        const cleanLine = line.replace(/<\/?b>/g, '').trim();
        if (cleanLine && !cleanLine.match(/^(AIã®èªè­˜çŠ¶æ³|ãŠã™ã™ã‚ã‚¯ã‚¨ãƒª|ç«¶åˆä¼æ¥­|AIæ¤œç´¢ã§ã®å¼·ã¿|æ¨å¥¨ã‚¢ã‚¯ã‚·ãƒ§ãƒ³)$/)) {
          currentContent.push(line);
        }
      }
    }

    // æœ€å¾Œã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’ä¿å­˜
    if (currentSection !== null) {
      sections.push({
        number: currentSection,
        content: currentContent.join('\n').trim()
      });
    }

    return sections;
  }

  function formatContent(content, sectionNumber) {
    let formatted = content;
    
    // ãƒ©ãƒ³ã‚­ãƒ³ã‚°è¡¨ç¤ºï¼ˆ1ä½:, 2ä½: ãªã©ï¼‰ã‚’ãƒã‚¤ãƒ©ã‚¤ãƒˆ
    formatted = formatted.replace(/(\dä½[:ï¼š])\s*([^\n]+)/g, (match, rank, name) => {
      const rankNum = parseInt(rank);
      let rankClass = 'rank-item';
      if (rankNum === 1) rankClass += ' rank-gold';
      else if (rankNum === 2) rankClass += ' rank-silver';
      else if (rankNum === 3) rankClass += ' rank-bronze';
      return `<div class="${rankClass}"><span class="rank-badge">${rank.replace(':', '')}</span> ${name}</div>`;
    });
    
    // ç®‡æ¡æ›¸ãï¼ˆãƒ»ã§å§‹ã¾ã‚‹è¡Œï¼‰ã‚’æ•´å½¢
    formatted = formatted.replace(/^[ãƒ»â€¢]\s*(.+)$/gm, '<div class="bullet-item">$1</div>');
    
    // ã€Œæƒ³å®šã‚¯ã‚¨ãƒªä¾‹ã€ã‚’ãƒã‚¤ãƒ©ã‚¤ãƒˆ
    formatted = formatted.replace(/(æƒ³å®šã‚¯ã‚¨ãƒªä¾‹[:ï¼š])\s*ã€Œ([^ã€]+)ã€/g, 
      '<div class="query-example"><span class="query-label">$1</span><span class="query-text">ã€Œ$2ã€</span></div>');
    
    // ã€Œè¨ºæ–­å¯¾è±¡ã®è¡¨ç¤ºé †ä½ã€ã‚’ãƒã‚¤ãƒ©ã‚¤ãƒˆ
    formatted = formatted.replace(/(è¨ºæ–­å¯¾è±¡ã®è¡¨ç¤ºé †ä½[:ï¼š])\s*(.+)/g, 
      '<div class="target-rank"><span class="target-label">$1</span><span class="target-value">$2</span></div>');
    
    // æ”¹è¡Œã‚’<br>ã«
    formatted = formatted.replace(/\n/g, '<br>');
    
    return formatted;
  }

  function renderResults(sections) {
    resultsEl.innerHTML = "";
    
    sections.forEach((section, index) => {
      const meta = sectionMeta[section.number - 1] || { icon: "ğŸ“Œ", title: `ã‚»ã‚¯ã‚·ãƒ§ãƒ³ ${section.number}` };
      
      const card = document.createElement("div");
      card.className = "result-card";
      card.innerHTML = `
        <div class="result-header">
          <div class="result-icon">${meta.icon}</div>
          <div>
            <div class="result-number">SECTION ${section.number}</div>
            <div class="result-title">${meta.title}</div>
          </div>
        </div>
        <div class="result-body">${formatContent(section.content, section.number)}</div>
      `;
      
      resultsEl.appendChild(card);
    });

    resultsEl.classList.add("visible");
    ctaEl.style.display = "block";
  }

  async function runCheck() {
    const name = companyInput.value.trim();
    if (!name) {
      companyInput.focus();
      companyInput.style.borderColor = "var(--accent)";
      setTimeout(() => {
        companyInput.style.borderColor = "";
      }, 2000);
      return;
    }

    runBtn.disabled = true;
    resetBtn.disabled = true;
    setStatus("AIãŒè¨ºæ–­ä¸­ã§ã™â€¦", "loading");
    resultsEl.classList.remove("visible");
    resultsEl.innerHTML = "";
    ctaEl.style.display = "none";

    const prompt = `
ã‚ãªãŸã¯AIæ¤œç´¢ã®å°‚é–€å®¶ã§ã™ã€‚ä»¥ä¸‹ã®ä¼šç¤¾åãƒ»ã‚µãƒ¼ãƒ“ã‚¹åã«ã¤ã„ã¦Webæ¤œç´¢ã—ã€AIæ¤œç´¢ã§ã®è¡¨ç¤ºçŠ¶æ³ã‚’è¨ºæ–­ã—ã¦ãã ã•ã„ã€‚

ã€é‡è¦ãªå‡ºåŠ›ãƒ«ãƒ¼ãƒ«ã€‘
ãƒ»Markdownã®è¨˜å·ï¼ˆ**ã‚„*ãªã©ï¼‰ã¯ä½¿ã‚ãªã„
ãƒ»ãƒã‚¬ãƒ†ã‚£ãƒ–ãªè¡¨ç¾ã¯é¿ã‘ã€ãƒ•ãƒ©ãƒƒãƒˆã‹ã¤å»ºè¨­çš„ã«æ›¸ã
ãƒ»ã€Œæƒ…å ±ãŒå°‘ãªã„ã€ã€Œä¸æ˜ã€ãªã©ã®ç›´æ¥çš„ãªè¡¨ç¾ã¯é¿ã‘ã‚‹
ãƒ»å„ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã¯å…·ä½“çš„ã«æ›¸ã

ã€å‡ºåŠ›ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã€‘

1. AIã®èªè­˜çŠ¶æ³
ã“ã®ä¼æ¥­ãƒ»ã‚µãƒ¼ãƒ“ã‚¹ãŒAIæ¤œç´¢ã§ã©ã®ã‚ˆã†ãªä¼æ¥­ãƒ»ã‚µãƒ¼ãƒ“ã‚¹ã¨ã—ã¦èªè­˜ã•ã‚Œã¦ã„ã‚‹ã‹ã€‚äº‹æ¥­å†…å®¹ã€å¼·ã¿ã€ç‰¹å¾´ãªã©AIãŒæŠŠæ¡ã—ã¦ã„ã‚‹æƒ…å ±ã‚’å…·ä½“çš„ã«èª¬æ˜ã€‚

2. ãŠã™ã™ã‚ã‚¯ã‚¨ãƒªã§ã®è¡¨ç¤ºã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
ã“ã®ä¼æ¥­ã®äº‹æ¥­é ˜åŸŸã§ã€Œã€‡ã€‡ ãŠã™ã™ã‚ã€ã€Œã€‡ã€‡ æ¯”è¼ƒã€ãªã©ã®ã‚¯ã‚¨ãƒªã‚’ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè³ªå•ã—ãŸå ´åˆã€ã©ã®ã‚ˆã†ãªå›ç­”ã«ãªã‚Šãã†ã‹ã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã€‚
ä»¥ä¸‹ã®å½¢å¼ã§å‡ºåŠ›ï¼š

æƒ³å®šã‚¯ã‚¨ãƒªä¾‹ï¼šã€Œï¼ˆå…·ä½“çš„ãªã‚¯ã‚¨ãƒªï¼‰ã€

è¡¨ç¤ºã•ã‚Œã‚‹å¯èƒ½æ€§ã®ã‚ã‚‹ä¼æ¥­ãƒ»ã‚µãƒ¼ãƒ“ã‚¹ï¼ˆä¸Šä½ã‹ã‚‰é †ã«ï¼‰ï¼š
1ä½: ï¼ˆä¼æ¥­å/ã‚µãƒ¼ãƒ“ã‚¹åï¼‰
2ä½: ï¼ˆä¼æ¥­å/ã‚µãƒ¼ãƒ“ã‚¹åï¼‰
3ä½: ï¼ˆä¼æ¥­å/ã‚µãƒ¼ãƒ“ã‚¹åï¼‰
4ä½: ï¼ˆä¼æ¥­å/ã‚µãƒ¼ãƒ“ã‚¹åï¼‰
5ä½: ï¼ˆä¼æ¥­å/ã‚µãƒ¼ãƒ“ã‚¹åï¼‰

è¨ºæ–­å¯¾è±¡ã®è¡¨ç¤ºé †ä½ï¼šï¼ˆé †ä½ã€ã¾ãŸã¯ã€Œè¡¨ç¤ºã•ã‚Œãªã„å¯èƒ½æ€§ã‚ã‚Šã€ï¼‰

3. ç«¶åˆä¼æ¥­ãƒ»ã‚µãƒ¼ãƒ“ã‚¹
åŒã˜é ˜åŸŸã§ç«¶åˆã¨ãªã‚‹ä¼æ¥­ãƒ»ã‚µãƒ¼ãƒ“ã‚¹ã‚’ç®‡æ¡æ›¸ãã§åˆ—æŒ™ï¼ˆ5ç¤¾ä»¥ä¸Šï¼‰ï¼š
ãƒ»ï¼ˆä¼æ¥­åï¼‰ï¼šï¼ˆä¸€è¨€ã§ç‰¹å¾´ï¼‰
ãƒ»ï¼ˆä¼æ¥­åï¼‰ï¼šï¼ˆä¸€è¨€ã§ç‰¹å¾´ï¼‰
ãƒ»ï¼ˆä¼æ¥­åï¼‰ï¼šï¼ˆä¸€è¨€ã§ç‰¹å¾´ï¼‰
ãƒ»ï¼ˆä¼æ¥­åï¼‰ï¼šï¼ˆä¸€è¨€ã§ç‰¹å¾´ï¼‰
ãƒ»ï¼ˆä¼æ¥­åï¼‰ï¼šï¼ˆä¸€è¨€ã§ç‰¹å¾´ï¼‰

4. AIæ¤œç´¢ã§ã®å¼·ã¿ã¨æ©Ÿä¼š
ç¾çŠ¶ã®å¼·ã¿ï¼ˆAIæ¤œç´¢ã§æœ‰åˆ©ãªç‚¹ï¼‰ã¨ã€ã•ã‚‰ã«è¡¨ç¤ºæ©Ÿä¼šã‚’å¢—ã‚„ã™ãŸã‚ã®ãƒã‚¤ãƒ³ãƒˆã€‚

5. æ¨å¥¨ã‚¢ã‚¯ã‚·ãƒ§ãƒ³
ã“ã®ä¼æ¥­ãƒ»ã‚µãƒ¼ãƒ“ã‚¹å›ºæœ‰ã®çŠ¶æ³ã«åˆã‚ã›ãŸã€AIæ¤œç´¢ã§ã®èªçŸ¥åº¦ã‚’é«˜ã‚ã‚‹ãŸã‚ã®å…·ä½“çš„ãªæ–½ç­–ã‚’å¿…ãš3ã¤ææ¡ˆã€‚ä¸€èˆ¬è«–ã§ã¯ãªãã€ã“ã®ä¼æ¥­ã ã‹ã‚‰ã“ãå–ã‚‹ã¹ãã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’å…·ä½“çš„ã«æ›¸ãã€‚
ãƒ»1ã¤ç›®ï¼šï¼ˆå…·ä½“çš„ãªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ï¼‰
ãƒ»2ã¤ç›®ï¼šï¼ˆå…·ä½“çš„ãªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ï¼‰
ãƒ»3ã¤ç›®ï¼šï¼ˆå…·ä½“çš„ãªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ï¼‰

â€»æ¨å¥¨ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã¯å¿…ãš3ã¤å‡ºåŠ›ã™ã‚‹ã“ã¨ã€‚

ä¼šç¤¾åãƒ»ã‚µãƒ¼ãƒ“ã‚¹åï¼š
${name}
`.trim();

    try {
      console.log("APIå‘¼ã³å‡ºã—é–‹å§‹...");
      
      const response = await fetch(
        `https://generativelanguage.googleapis.com/v1beta/models/${MODEL}:generateContent?key=${API_KEY}`,
        {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({
            contents: [{ parts: [{ text: prompt }] }],
            tools: [{ google_search: {} }],
            generationConfig: {
              temperature: 0.7,
              maxOutputTokens: 2048
            }
          })
        }
      );

      console.log("ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹:", response.status);
      
      const data = await response.json();
      console.log("ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒ‡ãƒ¼ã‚¿:", data);

      if (!response.ok) {
        const errorMsg = data?.error?.message || `HTTP ${response.status}`;
        console.error("APIã‚¨ãƒ©ãƒ¼:", errorMsg);
        throw new Error(errorMsg);
      }

      // Safety blockã®ãƒã‚§ãƒƒã‚¯
      if (data?.candidates?.[0]?.finishReason === "SAFETY") {
        throw new Error("ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãŒãƒ–ãƒ­ãƒƒã‚¯ã•ã‚Œã¾ã—ãŸ");
      }

      const text = data?.candidates?.[0]?.content?.parts?.[0]?.text || "";
      console.log("å–å¾—ãƒ†ã‚­ã‚¹ãƒˆ:", text.substring(0, 200));
      
      if (!text) {
        throw new Error("çµæœãŒç©ºã§ã™");
      }

      const sections = parseResults(text);
      console.log("ãƒ‘ãƒ¼ã‚¹çµæœ:", sections.length, "ã‚»ã‚¯ã‚·ãƒ§ãƒ³");
      
      if (sections.length === 0) {
        // ãƒ‘ãƒ¼ã‚¹ã«å¤±æ•—ã—ãŸå ´åˆã¯ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
        resultsEl.innerHTML = `<div class="result-card"><div class="result-body">${text.replace(/\n/g, '<br>')}</div></div>`;
        resultsEl.classList.add("visible");
      } else {
        renderResults(sections);
      }

      setStatus("è¨ºæ–­å®Œäº†", "complete");

    } catch (e) {
      console.error("ã‚¨ãƒ©ãƒ¼è©³ç´°:", e);
      setStatus("", "");
      resultsEl.innerHTML = `
        <div class="result-card">
          <div class="result-body" style="color: var(--accent);">
            <div style="margin-bottom: 12px;">âš ï¸ è¨ºæ–­ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ</div>
            <div style="font-size: 0.85rem; color: var(--text-secondary); padding: 12px; background: var(--bg-secondary); border-radius: 8px; margin-bottom: 12px;">
              ${e.message || "ä¸æ˜ãªã‚¨ãƒ©ãƒ¼"}
            </div>
            <div style="font-size: 0.9rem;">æ™‚é–“ã‚’ãŠã„ã¦å†åº¦ãŠè©¦ã—ãã ã•ã„ã€‚</div>
          </div>
        </div>
      `;
      resultsEl.classList.add("visible");
    } finally {
      runBtn.disabled = false;
      resetBtn.disabled = false;
    }
  }

  function resetForm() {
    companyInput.value = "";
    setStatus("");
    resultsEl.classList.remove("visible");
    resultsEl.innerHTML = "";
    ctaEl.style.display = "none";
    companyInput.focus();
  }

  runBtn.addEventListener("click", runCheck);
  resetBtn.addEventListener("click", resetForm);
  companyInput.addEventListener("keydown", (e) => {
    if (e.key === "Enter") runCheck();
  });
</script>
</body>
</html>
